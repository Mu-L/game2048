buildscript {
    repositories {
		google();
		jcenter();
	}
    dependencies {
		classpath 'com.android.tools.build:gradle:4.1.1';
        classpath 'org.jetbrains.kotlin:kotlin-gradle-plugin:1.4.21' }
}
repositories {
    mavenLocal()
    // Remove below repo link when https://github.com/korlibs/korge-next/issues/121 is resolved
    maven { url = 'https://dl.bintray.com/korlibs/korlibs' }
    google()
    jcenter()
}
apply plugin: 'com.android.application'
apply plugin: 'kotlin-android'
android {
    lintOptions {
        disable("GradleCompatible")
    }
    kotlinOptions {
        jvmTarget = "1.8"
        freeCompilerArgs += "-Xmulti-platform"
    }
    packagingOptions {
        exclude 'META-INF/DEPENDENCIES'
        exclude 'META-INF/LICENSE'
        exclude 'META-INF/LICENSE.txt'
        exclude 'META-INF/license.txt'
        exclude 'META-INF/NOTICE'
        exclude 'META-INF/NOTICE.txt'
        exclude 'META-INF/notice.txt'
        exclude 'META-INF/LGPL*'
        exclude 'META-INF/AL2.0'
        exclude 'META-INF/*.kotlin_module'
        exclude '**/*.kotlin_metadata'
        exclude '**/*.kotlin_builtins'
    }
    compileSdkVersion 29
    defaultConfig {
        applicationId 'org.andstatus.game2048'
        minSdkVersion 24
        targetSdkVersion 29
        versionCode 19
        versionName '1.9.1'

        archivesBaseName = "game2048-android-$versionName"
    }
    buildTypes {
        debug {
            minifyEnabled false
        }
        release {
            minifyEnabled true
        }
    }
    sourceSets {
        main {
            manifest.srcFile '../src/main/AndroidManifest.xml'
            java.srcDirs += [
                    "../src/main/java",
                    "../src/commonMain/kotlin",
                    "../src/androidMain/kotlin"]
            assets.srcDirs += [
                    "../src/commonMain/resources",
                    "../build/korgeProcessedResources/metadata/main"]
            res.srcDirs  += [
                    "../src/commonMain/resources/res"]
        }
    }
}
dependencies {
    implementation 'org.jetbrains.kotlin:kotlin-stdlib-jdk7:1.4.21'
    implementation 'com.soywiz.korlibs.klock:klock-android:2.0.3'
    implementation 'com.soywiz.korlibs.kmem:kmem-android:2.0.3'
    implementation 'com.soywiz.korlibs.kds:kds-android:2.0.3'
    implementation 'com.soywiz.korlibs.krypto:krypto-android:2.0.3'
    implementation 'com.soywiz.korlibs.korge:korge-android:2.0.3'
    implementation 'com.soywiz.korlibs.korma:korma-android:2.0.3'
    implementation 'com.soywiz.korlibs.korio:korio-android:2.0.4'
    implementation 'com.soywiz.korlibs.korim:korim-android:2.0.2'
    implementation 'com.soywiz.korlibs.korau:korau-android:2.0.2'
    implementation 'com.soywiz.korlibs.korgw:korgw-android:2.0.2'
    implementation 'com.soywiz.korlibs.korinject:korinject-android:2.0.2'
    implementation 'com.soywiz.korlibs.klogger:klogger-android:2.0.3'
    implementation 'com.soywiz.korlibs.korte:korte-android:2.0.2'
}
